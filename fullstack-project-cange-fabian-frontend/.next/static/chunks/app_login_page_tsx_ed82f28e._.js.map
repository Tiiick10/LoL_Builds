{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/fabia/Desktop/LoL_Builds/fullstack-project-cange-fabian-frontend/app/login/page.tsx"],"sourcesContent":["'use client'\r\nimport { useState } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport axios from 'axios'\r\n\r\nexport default function LoginPage() {\r\n  const router = useRouter()\r\n  const [username, setUsername] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const [error, setError] = useState('')\r\n\r\n  const handleLogin = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    try {\r\n      const res = await axios.post('http://localhost:8000/api/custom-login/', {\r\n        username,\r\n        password\r\n      })\r\n\r\n      localStorage.setItem('access', res.data.access)\r\n      localStorage.setItem('refresh', res.data.refresh)\r\n      localStorage.setItem('is_admin', res.data.is_superuser)  // facultatif pour frontend\r\n      localStorage.setItem('role', res.data.role)\r\n\r\n      router.push('/')\r\n      setTimeout(() => {\r\n        window.location.reload()\r\n      }, 120)\r\n    } catch (err) {\r\n      setError(\"Invalid credentials\")\r\n    }\r\n  }\r\n\r\n  return (\r\n    <main className=\"p-8 max-w-md mx-auto text-white\">\r\n      <h1 className=\"text-2xl font-bold mb-4\">Login</h1>\r\n      {error && <p className=\"text-red-500 mb-2\">{error}</p>}\r\n      <form onSubmit={handleLogin} className=\"space-y-4\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Username\"\r\n          value={username}\r\n          onChange={e => setUsername(e.target.value)}\r\n          className=\"w-full px-3 py-2 rounded bg-gray-700\"\r\n          required\r\n        />\r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"Password\"\r\n          value={password}\r\n          onChange={e => setPassword(e.target.value)}\r\n          className=\"w-full px-3 py-2 rounded bg-gray-700\"\r\n          required\r\n        />\r\n        <button type=\"submit\" className=\"w-full bg-indigo-600 py-2 rounded\">\r\n          Login\r\n        </button>\r\n      </form>\r\n    </main>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;;;AAHA;;;;AAKe,SAAS;;IACtB,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEnC,MAAM,cAAc,OAAO;QACzB,EAAE,cAAc;QAChB,IAAI;YACF,MAAM,MAAM,MAAM,wIAAA,CAAA,UAAK,CAAC,IAAI,CAAC,2CAA2C;gBACtE;gBACA;YACF;YAEA,aAAa,OAAO,CAAC,UAAU,IAAI,IAAI,CAAC,MAAM;YAC9C,aAAa,OAAO,CAAC,WAAW,IAAI,IAAI,CAAC,OAAO;YAChD,aAAa,OAAO,CAAC,YAAY,IAAI,IAAI,CAAC,YAAY,EAAG,2BAA2B;;YACpF,aAAa,OAAO,CAAC,QAAQ,IAAI,IAAI,CAAC,IAAI;YAE1C,OAAO,IAAI,CAAC;YACZ,WAAW;gBACT,OAAO,QAAQ,CAAC,MAAM;YACxB,GAAG;QACL,EAAE,OAAO,KAAK;YACZ,SAAS;QACX;IACF;IAEA,qBACE,6LAAC;QAAK,WAAU;;0BACd,6LAAC;gBAAG,WAAU;0BAA0B;;;;;;YACvC,uBAAS,6LAAC;gBAAE,WAAU;0BAAqB;;;;;;0BAC5C,6LAAC;gBAAK,UAAU;gBAAa,WAAU;;kCACrC,6LAAC;wBACC,MAAK;wBACL,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAA,IAAK,YAAY,EAAE,MAAM,CAAC,KAAK;wBACzC,WAAU;wBACV,QAAQ;;;;;;kCAEV,6LAAC;wBACC,MAAK;wBACL,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAA,IAAK,YAAY,EAAE,MAAM,CAAC,KAAK;wBACzC,WAAU;wBACV,QAAQ;;;;;;kCAEV,6LAAC;wBAAO,MAAK;wBAAS,WAAU;kCAAoC;;;;;;;;;;;;;;;;;;AAM5E;GAvDwB;;QACP,qIAAA,CAAA,YAAS;;;KADF","debugId":null}}]
}