{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Win/OneDrive/Bureau/fullstack_project_CANGE_FABIAN/fullstack-project-cange-fabian-frontend/components/ui/header.tsx"],"sourcesContent":["'use client'\r\n\r\nimport Link from 'next/link'\r\nimport Image from 'next/image'\r\nimport { useEffect, useState } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport { jwtDecode } from 'jwt-decode'\r\n\r\ninterface DecodedToken {\r\n  username: string\r\n  is_superuser: boolean\r\n  role: string\r\n  user_id: number\r\n}\r\n\r\nexport default function Header() {\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false)\r\n  const [isRedacteur, setIsRedacteur] = useState(false)\r\n  const [menuOpen, setMenuOpen] = useState(false)\r\n  const router = useRouter()\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"access\")\r\n    if (token) {\r\n      setIsLoggedIn(true)\r\n  \r\n      try {\r\n        const decoded: DecodedToken = jwtDecode(token)\r\n        const userId = decoded.user_id\r\n  \r\n        fetch(`http://127.0.0.1:8000/api/users/${userId}/`, {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        })\r\n          .then((res) => res.json())\r\n          .then((data) => {\r\n            console.log(\"User data from API:\", data)\r\n            if (data.is_superuser) {\r\n              setIsRedacteur(true)\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            console.error(\"Failed to fetch user data:\", err)\r\n          })\r\n  \r\n      } catch (err) {\r\n        console.error(\"Invalid token\", err)\r\n      }\r\n    }\r\n  }, [])\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('access')\r\n    localStorage.removeItem('refresh')\r\n    setIsLoggedIn(false)\r\n    setIsRedacteur(false)\r\n    router.push('/')\r\n  }\r\n\r\n  return (\r\n    <header className=\"z-30 mt-2 w-full md:mt-5\">\r\n      <div className=\"mx-auto max-w-6xl px-4 sm:px-6\">\r\n        <div className=\"relative flex h-14 items-center justify-between gap-3 rounded-2xl bg-gray-900/90 px-3 before:pointer-events-none before:absolute before:inset-0 before:rounded-[inherit] before:border before:border-transparent before:[background:linear-gradient(to_right,var(--color-gray-800),var(--color-gray-700),var(--color-gray-800))_border-box] before:[mask-composite:exclude_!important] before:[mask:linear-gradient(white_0_0)_padding-box,_linear-gradient(white_0_0)] after:absolute after:inset-0 after:-z-10 after:backdrop-blur-xs\">\r\n\r\n          {/* Logo / Home */}\r\n\r\n          <div className=\"flex mt-7\">\r\n            <Link href=\"/\" className=\"cursor-pointer\">\r\n              <Image\r\n                src=\"/images/logo.svg\"\r\n                width={100}\r\n                height={100}\r\n                alt=\"Logo\"\r\n                className=\"object-contain\"\r\n              />\r\n            </Link>\r\n          </div>\r\n\r\n          {/* Mobile Burger */}\r\n\r\n          <button onClick={() => setMenuOpen(!menuOpen)} className=\"text-white md:hidden z-40\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className=\"w-6 h-6\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M4 6h16M4 12h16M4 18h16\" />\r\n            </svg>\r\n          </button>\r\n\r\n          {/* Desktop Navigation */}\r\n\r\n          <ul className=\"hidden md:flex flex-1 items-center justify-end gap-3\">\r\n            {isLoggedIn ? (\r\n              <>\r\n                <li>\r\n                  <Link href=\"/create-build\" className=\"btn-sm bg-green-600 hover:bg-green-700 py-[5px] px-4 text-white rounded\">Create Build</Link>\r\n                </li>\r\n                {isRedacteur && (\r\n                  <li>\r\n                    <Link href=\"/articles/create\" className=\"btn-sm bg-blue-600 hover:bg-blue-700 py-[5px] px-4 text-white rounded\">Create Article</Link>\r\n                  </li>\r\n                )}\r\n                <li>\r\n                  <button onClick={handleLogout} className=\"btn-sm bg-red-600 hover:bg-red-700 py-[5px] px-4 text-white rounded\">Logout</button>\r\n                </li>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <li>\r\n                  <Link href=\"/login\" className=\"btn-sm bg-gray-800 py-[5px] px-4 text-gray-300 rounded hover:bg-gray-700\">Login</Link>\r\n                </li>\r\n                <li>\r\n                  <Link href=\"/register\" className=\"btn-sm bg-indigo-600 py-[5px] px-4 text-white rounded hover:bg-indigo-700\">Register</Link>\r\n                </li>\r\n              </>\r\n            )}\r\n          </ul>\r\n\r\n          {/* Mobile Menu */}\r\n\r\n          {menuOpen && (\r\n            <div className=\"absolute top-16 right-4 bg-black/90 rounded-lg p-4 flex flex-col gap-2 w-[170px] z-50 md:hidden\">\r\n              {isLoggedIn ? (\r\n                <>\r\n                  <Link href=\"/create-build\" onClick={() => setMenuOpen(false)} className=\"bg-green-600 hover:bg-green-700 text-white text-sm text-center px-4 py-2 rounded transition\">Create Build</Link>\r\n                  {isRedacteur && (\r\n                    <Link href=\"/articles/create\" onClick={() => setMenuOpen(false)} className=\"bg-blue-600 hover:bg-blue-700 text-white text-sm text-center px-4 py-2 rounded transition\">Create Article</Link>\r\n                  )}\r\n                  <button onClick={() => { handleLogout(); setMenuOpen(false) }} className=\"bg-red-600 hover:bg-red-700 text-white text-sm text-center px-4 py-2 rounded transition\">Logout</button>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Link href=\"/login\" onClick={() => setMenuOpen(false)} className=\"bg-gray-700 hover:bg-gray-600 text-white text-sm text-center px-4 py-2 rounded transition\">Login</Link>\r\n                  <Link href=\"/register\" onClick={() => setMenuOpen(false)} className=\"bg-indigo-600 hover:bg-indigo-700 text-white text-sm text-center px-4 py-2 rounded transition\">Register</Link>\r\n                </>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </header>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;;;AANA;;;;;;AAee,SAAS;;IACtB,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAEvB,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;4BAAE;YACR,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,IAAI,OAAO;gBACT,cAAc;gBAEd,IAAI;oBACF,MAAM,UAAwB,CAAA,GAAA,yJAAA,CAAA,YAAS,AAAD,EAAE;oBACxC,MAAM,SAAS,QAAQ,OAAO;oBAE9B,MAAM,CAAC,gCAAgC,EAAE,OAAO,CAAC,CAAC,EAAE;wBAClD,SAAS;4BACP,eAAe,CAAC,OAAO,EAAE,OAAO;wBAClC;oBACF,GACG,IAAI;4CAAC,CAAC,MAAQ,IAAI,IAAI;2CACtB,IAAI;4CAAC,CAAC;4BACL,QAAQ,GAAG,CAAC,uBAAuB;4BACnC,IAAI,KAAK,YAAY,EAAE;gCACrB,eAAe;4BACjB;wBACF;2CACC,KAAK;4CAAC,CAAC;4BACN,QAAQ,KAAK,CAAC,8BAA8B;wBAC9C;;gBAEJ,EAAE,OAAO,KAAK;oBACZ,QAAQ,KAAK,CAAC,iBAAiB;gBACjC;YACF;QACF;2BAAG,EAAE;IAEL,MAAM,eAAe;QACnB,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,cAAc;QACd,eAAe;QACf,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,6LAAC;QAAO,WAAU;kBAChB,cAAA,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;kCAIb,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC,+JAAA,CAAA,UAAI;4BAAC,MAAK;4BAAI,WAAU;sCACvB,cAAA,6LAAC,gIAAA,CAAA,UAAK;gCACJ,KAAI;gCACJ,OAAO;gCACP,QAAQ;gCACR,KAAI;gCACJ,WAAU;;;;;;;;;;;;;;;;kCAOhB,6LAAC;wBAAO,SAAS,IAAM,YAAY,CAAC;wBAAW,WAAU;kCACvD,cAAA,6LAAC;4BAAI,OAAM;4BAA6B,MAAK;4BAAO,SAAQ;4BAAY,aAAa;4BAAK,QAAO;4BAAe,WAAU;sCACxH,cAAA,6LAAC;gCAAK,eAAc;gCAAQ,gBAAe;gCAAQ,GAAE;;;;;;;;;;;;;;;;kCAMzD,6LAAC;wBAAG,WAAU;kCACX,2BACC;;8CACE,6LAAC;8CACC,cAAA,6LAAC,+JAAA,CAAA,UAAI;wCAAC,MAAK;wCAAgB,WAAU;kDAA0E;;;;;;;;;;;gCAEhH,6BACC,6LAAC;8CACC,cAAA,6LAAC,+JAAA,CAAA,UAAI;wCAAC,MAAK;wCAAmB,WAAU;kDAAwE;;;;;;;;;;;8CAGpH,6LAAC;8CACC,cAAA,6LAAC;wCAAO,SAAS;wCAAc,WAAU;kDAAsE;;;;;;;;;;;;yDAInH;;8CACE,6LAAC;8CACC,cAAA,6LAAC,+JAAA,CAAA,UAAI;wCAAC,MAAK;wCAAS,WAAU;kDAA2E;;;;;;;;;;;8CAE3G,6LAAC;8CACC,cAAA,6LAAC,+JAAA,CAAA,UAAI;wCAAC,MAAK;wCAAY,WAAU;kDAA4E;;;;;;;;;;;;;;;;;;oBAQpH,0BACC,6LAAC;wBAAI,WAAU;kCACZ,2BACC;;8CACE,6LAAC,+JAAA,CAAA,UAAI;oCAAC,MAAK;oCAAgB,SAAS,IAAM,YAAY;oCAAQ,WAAU;8CAA8F;;;;;;gCACrK,6BACC,6LAAC,+JAAA,CAAA,UAAI;oCAAC,MAAK;oCAAmB,SAAS,IAAM,YAAY;oCAAQ,WAAU;8CAA4F;;;;;;8CAEzK,6LAAC;oCAAO,SAAS;wCAAQ;wCAAgB,YAAY;oCAAO;oCAAG,WAAU;8CAA0F;;;;;;;yDAGrK;;8CACE,6LAAC,+JAAA,CAAA,UAAI;oCAAC,MAAK;oCAAS,SAAS,IAAM,YAAY;oCAAQ,WAAU;8CAA4F;;;;;;8CAC7J,6LAAC,+JAAA,CAAA,UAAI;oCAAC,MAAK;oCAAY,SAAS,IAAM,YAAY;oCAAQ,WAAU;8CAAgG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAStL;GA7HwB;;QAIP,qIAAA,CAAA,YAAS;;;KAJF","debugId":null}},
    {"offset": {"line": 320, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Win/OneDrive/Bureau/fullstack_project_CANGE_FABIAN/fullstack-project-cange-fabian-frontend/components/ClientLayout.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { usePathname } from 'next/navigation'\r\nimport Header from '@/components/ui/header'\r\n\r\nexport default function ClientLayout({ children }: { children: React.ReactNode }) {\r\n  const pathname = usePathname()\r\n  const showHeader = pathname !== '/'\r\n\r\n  return (\r\n    <div className=\"flex min-h-screen flex-col overflow-hidden supports-[overflow:clip]:overflow-clip\">\r\n      {showHeader && <Header />}\r\n      {children}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;;;AAHA;;;AAKe,SAAS,aAAa,EAAE,QAAQ,EAAiC;;IAC9E,MAAM,WAAW,CAAA,GAAA,qIAAA,CAAA,cAAW,AAAD;IAC3B,MAAM,aAAa,aAAa;IAEhC,qBACE,6LAAC;QAAI,WAAU;;YACZ,4BAAc,6LAAC,8HAAA,CAAA,UAAM;;;;;YACrB;;;;;;;AAGP;GAVwB;;QACL,qIAAA,CAAA,cAAW;;;KADN","debugId":null}}]
}